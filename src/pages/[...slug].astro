---
// This page is where all the files in `/src/content/pages` are rendered. Specifically, this is just
// a normal, top-level page.
import RootLayout from "$layouts/RootLayout.astro";
import { CollectionEntry, getCollection } from "astro:content";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
	const blogEntries = await getCollection("pages");

	return (
		blogEntries
			// Filter out index page - that is generated separately in `src/pages/index.astro` because
			// it requires special components.
			.filter((entry) => entry.slug != "index")
			.map((entry) => ({
				params: { slug: entry.slug },
				props: { entry }
			}))
	);
}

// The props for the page.
interface Props {
	entry: CollectionEntry<"pages">;
}

// 2. When it's time to render, you can get the entry directly from the prop
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<RootLayout title={entry.data.title} , description={`The ${entry.data.title} page`}>
	<h1>{entry.data.title}</h1>

	<Content />
</RootLayout>
